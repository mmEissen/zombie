{% extends "base.html" %}
{% block title %}Admin{% endblock %}

{% block html_head %}
<script src="{{url_for('static', filename='dynamic_table.js')}}"></script>
<script>
$(document).ready(function(e) {
    var games_table = dynamicTable.config('games-table',
        ['id_', 'when_created', 'players', 'status', 'is_active'],
        ['Game ID', 'Created', 'Player Count', 'Satus', 'Active?'],
        'There are no current games.');

    function load_games() {
        $.getJSON(
            "{{ url_for('api.list_games') }}",
            function( response ) {
                games_table.load(response.data);
            }
        )
    }

    $('#btn-new-game').click(function(e) {
        $.ajax({
            url: "{{ url_for('api.put_game') }}",
            type: "PUT",
            success: load_games
        });
    });

    load_games();
});
</script>
{% endblock %}

{% block content %}
    <button id="btn-new-game">New Game</button>
    <table id="games-table"></table>
{% endblock %}