{% extends "base.html" %}
{% block title %}Admin - Game{% endblock %}

{% block html_head %}
<script src="{{url_for('static', filename='dynamic_table.js')}}"></script>
<script>
$(document).ready(function(e) {
    var players_table = dynamicTable.config('players-table',
        ['name', 'uid'],
        ["Name", "NFC ID"],
        'There are no players in this game.');

    function update_from_result(response) {
        players_table.load(response.players)
    }

    (function update() {
        $.ajax({
            dataType: "json",
            url: "{{ url_for('api.get_game', game_id=game_id) }}",
            success: update_from_result,
            complete: setTimeout(function() {update()}, 1000),
            timeout: 1000
        });
        
    })(); 
});
</script>
{% endblock %}

{% block content %}
    <table class="styled-table" id="players-table"></table>
    <a href="{{ url_for('admin.root') }}">Go Back</a>
{% endblock %}